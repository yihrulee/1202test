<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>植物的運輸 - 樹皮與年輪</title>
    <style>
        /* --- 基礎設定 --- */
        body {
            font-family: "Microsoft JhengHei", "微軟正黑體", sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f9f4; /* 淺綠底色 */
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px 100px 20px; /* 底部留白給導覽列 */
        }

        /* --- 標題樣式 --- */
        h1 {
            text-align: center;
            color: #2e7d32;
            margin-bottom: 40px;
            font-size: 2.2rem;
            border-bottom: 3px solid #a5d6a7;
            padding-bottom: 15px;
            display: inline-block;
        }

        .header-wrapper {
            text-align: center;
        }

        h2 {
            color: #388e3c;
            border-left: 5px solid #388e3c;
            padding-left: 15px;
            margin-top: 0;
        }

        /* --- 內容區塊 (圖文並排) --- */
        .content-row {
            display: flex;
            flex-direction: row;
            align-items: flex-start; /* 對齊頂部 */
            background: #fff;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            margin-bottom: 30px;
            gap: 30px;
        }

        .text-col {
            flex: 1;
            font-size: 1.1rem;
        }

        .img-col {
            flex: 0 0 35%; /* 圖片佔約 35% 寬度 */
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .img-col img {
            width: 100%;
            max-width: 300px;
            height: auto;
            border-radius: 8px;
            border: 1px solid #ddd;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* 手機版：圖文垂直排列 */
        @media (max-width: 768px) {
            .content-row {
                flex-direction: column;
            }
            .img-col {
                width: 100%;
                margin-top: 15px;
            }
        }

        /* --- 關鍵字樣式 --- */
        .keyword-blue {
            color: #1565c0;
            font-weight: bold;
            background-color: #e3f2fd;
            padding: 0 4px;
            border-radius: 4px;
        }

        .keyword-red {
            color: #c62828;
            font-weight: bold;
            background-color: #ffebee;
            padding: 0 4px;
            border-radius: 4px;
        }

        /* --- 互動練習區 --- */
        .quiz-section {
            margin-top: 50px;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 30px;
            color: #2e7d32;
        }

        .quiz-card {
            background: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .quiz-question {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 15px;
        }

        .options label {
            display: block;
            margin: 8px 0;
            cursor: pointer;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid transparent;
            background-color: #fafafa;
        }
        
        .options label:hover {
            background-color: #f0f0f0;
            border-color: #ddd;
        }

        /* 選單樣式 */
        select {
            padding: 5px 10px;
            font-size: 1rem;
            border-radius: 5px;
            border: 1px solid #ccc;
            background-color: white;
            margin: 0 5px;
        }

        /* --- 狀態樣式 (正確/錯誤) --- */
        .quiz-card.correct {
            border-color: #4caf50;
            background-color: #e8f5e9;
        }

        .quiz-card.incorrect {
            border-color: #f44336;
            background-color: #ffebee;
        }

        .feedback {
            margin-top: 15px;
            font-weight: bold;
            display: none; /* 預設隱藏 */
            padding: 10px;
            border-radius: 5px;
        }

        .quiz-card.correct .feedback {
            display: block;
            color: #2e7d32;
            background: rgba(76, 175, 80, 0.1);
        }

        .quiz-card.incorrect .feedback {
            display: block;
            color: #c62828;
            background: rgba(244, 67, 54, 0.1);
        }

        /* --- 按鈕樣式 --- */
        .btn {
            padding: 8px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s;
            margin-top: 15px;
            font-weight: bold;
        }

        .btn-check {
            background-color: #2196f3;
            color: white;
        }
        .btn-check:hover { background-color: #1976d2; }
        .btn-check:disabled {
            background-color: #bdbdbd;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .btn-retry {
            background-color: #ff9800;
            color: white;
            display: none; /* 預設隱藏 */
        }
        .btn-retry:hover { background-color: #f57c00; }

        /* --- 底部導覽列 --- */
        .footer-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: #fff;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            padding: 15px 0;
            display: flex;
            justify-content: center;
            gap: 40px;
            z-index: 100;
        }

        .nav-btn {
            text-decoration: none;
            padding: 10px 25px;
            border-radius: 30px;
            font-weight: bold;
            color: white;
            transition: all 0.3s;
            display: flex;
            align-items: center;
        }

        .prev-btn {
            background-color: #757575;
        }
        .prev-btn:hover { background-color: #616161; }

        .next-btn {
            background-color: #4caf50;
        }
        .next-btn:hover { background-color: #388e3c; }

        /* 禁用狀態的下一頁按鈕 */
        .next-btn.disabled {
            background-color: #e0e0e0;
            color: #9e9e9e;
            pointer-events: none;
            cursor: not-allowed;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header-wrapper">
        <h1>學習頁面：樹皮與年輪</h1>
    </div>

    <div class="content-row">
        <div class="text-col">
            <h2>樹皮與木材的形成</h2>
            <p>樹皮是樹幹的保護層，包含<span class="keyword-blue">韌皮部</span>及其外圍構造。</p>
            <p>當樹木逐年成長，<span class="keyword-red">形成層</span>內側的<span class="keyword-blue">木質部</span>會逐漸堆積形成<span class="keyword-red">木材</span>。</p>
        </div>
        <div class="img-col">
            <img src="3_1.png" alt="樹幹橫切面示意圖：樹皮與木材">
        </div>
    </div>

    <div class="content-row">
        <div class="text-col">
            <h2>年輪的奧秘</h2>
            <p><strong>春、夏</strong>氣候溫暖，雨量豐富，細胞生長速度較快，使得此時所長出的木質部細胞<span class="keyword-red">比較大</span>，形成的木材顏色<span class="keyword-blue">比較淺</span>。</p>
            <p>到了<strong>秋、冬</strong>，氣候寒冷乾燥，細胞生長速度較慢，使得此時所長出的木質部細胞<span class="keyword-red">比較小</span>，形成的木材顏色<span class="keyword-blue">比較深</span>。</p>
            <p>隨著一年四季的更迭，在樹幹、樹枝的橫切面，會形成深、淺對比明顯的環紋，稱為<span class="keyword-red">年輪</span>。</p>
        </div>
        <div class="img-col">
            <img src="3_2.png" alt="年輪深淺紋路示意圖">
        </div>
    </div>

    <div class="content-row">
        <div class="text-col">
            <h2>樹皮受損與中空神木</h2>
            <p>南投縣溪頭有些柳杉的樹皮被松鼠啃食，造成柳杉樹枝死亡。這是由於樹皮包含<span class="keyword-blue">韌皮部</span>，當樹皮遭松鼠啃食一圈之後，韌皮部遭到破壞，<span class="keyword-red">養分</span>無法運送到根部，使根部因缺乏養分而壞死，進而失去吸收水分的功能，於是造成柳杉枝葉枯黃而死亡。</p>
            <p>而神木中心的部分是<span class="keyword-blue">不具運輸功能</span>的老化木質部，所以即使樹幹中空仍可以存活，在大自然中也可看見樹幹中空卻仍然生長的樹木。</p>
        </div>
        <div class="img-col">
            <img src="3_3.png" alt="中空樹木與環狀剝皮示意圖">
        </div>
    </div>

    <div class="quiz-section">
        <h3 class="section-title">✦ 隨堂測驗：樹木生理知識</h3>

        <div class="quiz-card" id="q1">
            <div class="quiz-question">1. 為什麼柳杉被松鼠環繞啃食樹皮一圈後，最終會導致死亡？</div>
            <div class="options">
                <label><input type="radio" name="q1" value="A"> A. 木質部受損，水分無法輸送到葉子</label>
                <label><input type="radio" name="q1" value="B"> B. 韌皮部受損，養分無法輸送到根部，導致根部餓死</label>
                <label><input type="radio" name="q1" value="C"> C. 樹皮受損，導致樹木遭受細菌嚴重感染立即死亡</label>
            </div>
            <button class="btn btn-check" onclick="checkQ1()" disabled>檢查答案</button>
            <button class="btn btn-retry" onclick="retry('q1')">重做本題</button>
            <div class="feedback" id="fb-q1"></div>
        </div>

        <div class="quiz-card" id="q2">
            <div class="quiz-question">2. 關於年輪的形成，請選出正確的組合：</div>
            <div style="font-size: 1.1rem; padding: 10px 0; line-height: 2;">
                春夏季節，氣候溫暖雨量多，細胞生長較
                <select id="q2-select1" onchange="enableCheck('q2')">
                    <option value="" disabled selected>---</option>
                    <option value="fast">快</option>
                    <option value="slow">慢</option>
                </select>
                ，顏色較
                <select id="q2-select2" onchange="enableCheck('q2')">
                    <option value="" disabled selected>---</option>
                    <option value="dark">深</option>
                    <option value="light">淺</option>
                </select>
                。
            </div>
            <button class="btn btn-check" onclick="checkQ2()" disabled>檢查答案</button>
            <button class="btn btn-retry" onclick="retry('q2')">重做本題</button>
            <div class="feedback" id="fb-q2"></div>
        </div>

        <div class="quiz-card" id="q3">
            <div class="quiz-question">3. 神木如果樹幹中心中空了，因為失去了主要的運輸構造，所以一定會馬上枯死。</div>
            <div class="options">
                <label><input type="radio" name="q3" value="T"> 正確</label>
                <label><input type="radio" name="q3" value="F"> 錯誤</label>
            </div>
            <button class="btn btn-check" onclick="checkQ3()" disabled>檢查答案</button>
            <button class="btn btn-retry" onclick="retry('q3')">重做本題</button>
            <div class="feedback" id="fb-q3"></div>
        </div>

        <div class="quiz-card" id="q4">
            <div class="quiz-question">4. 我們用來製作家具的「木材」，主要源自於樹幹的哪個部分？</div>
            <div class="options">
                <label><input type="radio" name="q4" value="A"> A. 形成層內側，逐年堆積的老化木質部</label>
                <label><input type="radio" name="q4" value="B"> B. 樹皮外側的保護組織</label>
                <label><input type="radio" name="q4" value="C"> C. 形成層外側的韌皮部</label>
            </div>
            <button class="btn btn-check" onclick="checkQ4()" disabled>檢查答案</button>
            <button class="btn btn-retry" onclick="retry('q4')">重做本題</button>
            <div class="feedback" id="fb-q4"></div>
        </div>
    </div>
</div>

<div class="footer-nav">
    <a href="2.html" class="nav-btn prev-btn">← 上一頁</a>
    <a href="4.html" class="nav-btn next-btn disabled" id="nextLink">下一頁 →</a>
</div>

<script>
    // 狀態追蹤
    const progress = {
        q1: false,
        q2: false,
        q3: false,
        q4: false
    };

    // 監聽 Radio 啟用檢查按鈕
    document.querySelectorAll('input[type=radio]').forEach(radio => {
        radio.addEventListener('change', (e) => {
            const qId = e.target.name; 
            const container = document.getElementById(qId);
            container.querySelector('.btn-check').disabled = false;
        });
    });

    // 監聽 Select 啟用檢查按鈕 (需兩個都選)
    function enableCheck(qId) {
        const container = document.getElementById(qId);
        const selects = container.querySelectorAll('select');
        let allSelected = true;
        selects.forEach(sel => {
            if(!sel.value) allSelected = false;
        });
        if(allSelected) {
            container.querySelector('.btn-check').disabled = false;
        }
    }

    // --- 結果處理 ---
    function handleResult(qId, isCorrect, correctMsg, errorMsg) {
        const card = document.getElementById(qId);
        const feedback = document.getElementById(`fb-${qId}`);
        const checkBtn = card.querySelector('.btn-check');
        const retryBtn = card.querySelector('.btn-retry');
        const inputs = card.querySelectorAll('input, select');

        if (isCorrect) {
            card.classList.add('correct');
            card.classList.remove('incorrect');
            feedback.innerHTML = `✅ 正確！${correctMsg}`;
            checkBtn.style.display = 'none';
            retryBtn.style.display = 'none';
            inputs.forEach(input => input.disabled = true);
            progress[qId] = true;
            checkAllComplete();
        } else {
            card.classList.add('incorrect');
            card.classList.remove('correct');
            feedback.innerHTML = `❌ 錯誤。${errorMsg}`;
            checkBtn.style.display = 'none';
            retryBtn.style.display = 'inline-block';
            inputs.forEach(input => input.disabled = true);
            progress[qId] = false;
        }
    }

    // 重置
    function retry(qId) {
        const card = document.getElementById(qId);
        const feedback = document.getElementById(`fb-${qId}`);
        const checkBtn = card.querySelector('.btn-check');
        const retryBtn = card.querySelector('.btn-retry');
        const inputs = card.querySelectorAll('input, select');

        card.classList.remove('correct', 'incorrect');
        feedback.style.display = 'none';
        checkBtn.style.display = 'inline-block';
        checkBtn.disabled = true;
        retryBtn.style.display = 'none';

        inputs.forEach(input => {
            input.disabled = false;
            if(input.type === 'radio') input.checked = false;
            if(input.tagName === 'SELECT') input.selectedIndex = 0;
        });
    }

    // --- 題目邏輯 ---

    function checkQ1() {
        const val = document.querySelector('input[name="q1"]:checked').value;
        // 樹皮被啃食 = 韌皮部斷裂 = 根部沒養分
        const isCorrect = (val === 'B');
        handleResult('q1', isCorrect, '韌皮部被破壞會阻斷養分向下運輸。', '提示：樹皮包含韌皮部，韌皮部負責運輸養分給根部。');
    }

    function checkQ2() {
        const s1 = document.getElementById('q2-select1').value; // 生長速度
        const s2 = document.getElementById('q2-select2').value; // 顏色
        // 春夏：長得快、顏色淺
        const isCorrect = (s1 === 'fast' && s2 === 'light');
        handleResult('q2', isCorrect, '春夏溫暖雨水足，細胞大且顏色淺。', '提示：春夏雨量多，細胞喝飽水長得快（大），壁相對薄所以顏色淺。');
    }

    function checkQ3() {
        const val = document.querySelector('input[name="q3"]:checked').value;
        // 中空樹可活，因為中心是老化木質部，不具運輸功能
        const isCorrect = (val === 'F');
        handleResult('q3', isCorrect, '沒錯，樹幹中心是老化木質部，主要功能是支持，不具運輸功能，所以中空仍可存活。', '提示：請回想文本提到的神木，中心部分還有運輸功能嗎？');
    }

    function checkQ4() {
        const val = document.querySelector('input[name="q4"]:checked').value;
        // 木材 = 形成層內側堆積的老化木質部
        const isCorrect = (val === 'A');
        handleResult('q4', isCorrect, '木材就是逐年堆積的木質部。', '提示：木材是在形成層的「內側」還是「外側」呢？');
    }

    // --- 全域檢查 ---
    function checkAllComplete() {
        const allDone = Object.values(progress).every(s => s === true);
        if (allDone) {
            const nextLink = document.getElementById('nextLink');
            nextLink.classList.remove('disabled');
            nextLink.innerHTML = "下一頁 → (解鎖)";
            nextLink.style.backgroundColor = "#2e7d32";
            nextLink.style.boxShadow = "0 0 15px rgba(46, 125, 50, 0.6)";
        }
    }
</script>

</body>
</html>